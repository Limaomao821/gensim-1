CMAKE_MINIMUM_REQUIRED(VERSION 3.0)

PROJECT(GenSim C CXX ASM)

SET(CMAKE_MODULE_PATH "${CMAKE_SOURCE_DIR}/cmake/modules/")

ENABLE_TESTING()

IF(NOT CMAKE_BUILD_TYPE)
	MESSAGE(WARNING "No build type was specified, so defaulting to DEBUG")
	SET(CMAKE_BUILD_TYPE DEBUG)
ENDIF()

IF("${CMAKE_BUILD_TYPE}" STREQUAL "DEBUG")
    ADD_DEFINITIONS("-DCONFIGSTRING=\"Debug\"")
ELSEIF("${CMAKE_BUILD_TYPE}" STREQUAL "Debug")
    ADD_DEFINITIONS("-DCONFIGSTRING=\"Debug\"")
ELSEIF("${CMAKE_BUILD_TYPE}" STREQUAL "RELEASE")
	ADD_DEFINITIONS("-DCONFIGSTRING=\"Release\"")
ELSE()
	MESSAGE(SEND_ERROR "Unknown build type \"${CMAKE_BUILD_TYPE}\"")
ENDIF()

function(TARGET_ADD_SOURCES target)
	foreach(source ${ARGN})
		TARGET_SOURCES(${target} PRIVATE ${CMAKE_CURRENT_SOURCE_DIR}/${source})
	endforeach()
endfunction()

ADD_SUBDIRECTORY(archsim)
ADD_SUBDIRECTORY(gensim)

ADD_SUBDIRECTORY(support/libtrace)

ADD_SUBDIRECTORY(models)
